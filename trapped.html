<!-- abstract out and run on document ready? -->

<!doctype html>
<html>
  <head>
    <title>Prison Break</title>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 13px Helvetica, Arial; text-align: center;}
      button {
        position: absolute;
        top: 50%;
        font-size: 100px;
      }
      p {
        font-size: 100px;
      }

    </style>
  </head>
  <body>

  <button type="button"></button>
  <p id="orderStatus">Don't Click Yet</p>


    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>

    <script>
      var socket = io();

      socket.on('assign id', function(idNum) {
        $('button').html("Escape Room " + idNum + "!");
        roomNumber = "roomNumber=" + idNum;
        document.cookie=roomNumber;
      });

      socket.on('trapped forever', function(roomNum) {
        $('#orderStatus').html("You're trapped forever! Blame room " + roomNum);
      });
      socket.on('free', function() {
        $('#orderStatus').html("You're free!");
      });

      $('button').on('click', function(){
        socket.emit('click', document.cookie.split('=')[1]);
        $('#orderStatus').html("Thanks!");
      });

      socket.on('notification', function() {
        $('#orderStatus').html('Click now.');
      });

    </script>

  </body>
</html>